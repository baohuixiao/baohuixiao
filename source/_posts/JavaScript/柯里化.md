---
title: æŸ¯é‡ŒåŒ–
date: 2022/06/15
---

æŸ¯é‡ŒåŒ–(curry)ä¸æ­¢è¿ç”¨äºjavascriptä¸­ï¼Œè¿˜åœ¨è®¸å¤šç¼–ç¨‹è¯­è¨€ä¸­éƒ½æœ‰ç›¸å…³çš„ä½¿ç”¨ï¼Œä½†æ˜¯ä¸»è¦çš„ç›®çš„éƒ½æ˜¯ä¸€æ ·çš„ã€‚

æŸ¯é‡ŒåŒ–ï¼Œä¸»è¦æ˜¯å°†ä¸€ä¸ªæ‹¥æœ‰å¤šä¸ªå‚æ•°çš„å‡½æ•°æ‹†åˆ†æˆä¸€ç³»åˆ—åˆ†åˆ«æ‹¥æœ‰ä¸€ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œä¸‹é¢ç›´æ¥ç”¨ä»£ç æ¥ä½“ç°ğŸ‘‡ï¼š

```javascript
// æœªæŸ¯é‡ŒåŒ–
function add(a, b) {
  return a + b
}

add(3, 4)

// -------------------------------------------------

// æŸ¯é‡ŒåŒ–å->åˆ©ç”¨é—­åŒ…å­˜å‚¨å˜é‡a
function add(a) {
  return function(b) {
    return a + b
  }
}

add(a)(b)

// ä½ ä»¬ä¹Ÿè®¸æ³¨æ„åˆ°ï¼ŒæŸ¯é‡ŒåŒ–å‰åçš„è°ƒç”¨æ–¹å¼å˜äº†
// ä» add(3, 4) => add(3)(4)
```

ä¸Šé¢è¿™ç§æ˜¯å±äºå®šå‚æŸ¯é‡ŒåŒ–ï¼Œå› ä¸ºæˆ‘ä»¬çŸ¥é“æœ€å¤šå°±æ˜¯ä¸¤ä¸ªå‚æ•°ï¼Œå¦‚æœæˆ‘ä»¬`add(1)(2)(3)`è¿™æ ·æ¥è°ƒç”¨çš„è¯å°±ä¼šæŠ¥é”™äº†

æœ‰å®šå‚æŸ¯é‡ŒåŒ–ï¼Œé‚£ä¹ˆè‚¯å®šä¼šæœ‰ä¸å®šå‚æŸ¯é‡ŒåŒ–

```javascript
function add() {
  return [...arguments].reduce(
    (preVal, curVal) => preVal + curVal
  , 0)
}

function curry(fn) {
  const presetArgs = [].slice.call(arguments, 1)
  
  function curried() {
    const restArgs = [].slice.call(arguments)
    const allArgs = [...presetArgs, ...restArgs]
    return curry.call(null, fn, ...allArgs)
  }
  
  curried.toString = function () {
    return fn.apply(null, presetArgs)
  }
  
  return curried
}

const curried = curry(add)

const result = curried(1)(2)(3)
```

æˆ‘å¯¹æŸ¯é‡ŒåŒ–çš„ç†è§£æ²¡æœ‰é‚£ä¹ˆæ·±ï¼Œç°åœ¨ä¹Ÿæƒ³ä¸åˆ°æŸ¯é‡ŒåŒ–çš„è¿ç”¨åœºæ™¯ï¼Œå”¯ä¸€çš„æƒ³æ³•å°±æ˜¯åŒä¸€ä¸ªå‡½æ•°ï¼Œæƒ³åŠ å¤šå°‘ä¸ªæ•°éƒ½è¡Œï¼Œè€Œä¸ä¼šå—åˆ°é¢„è®¾çš„é™åˆ¶

æˆ‘ä»¬å¸¸å¸¸è¯´æŸ¯é‡ŒåŒ–å‡½æ•°ï¼ŒæŸ¯é‡ŒåŒ–åœ¨æˆ‘çœ‹æ¥å¹¶ä¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè€Œæ˜¯ä¸€ç§æ–¹å¼ï¼Œä¸€ç§å°†å¤šä¸ªå‚æ•°çš„å‡½æ•°è½¬åŒ–ä¸ºä¸€ç³»åˆ—æ‹¥æœ‰å•ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œä½¿å‰åä¸¤ç§æ–¹å¼è°ƒç”¨åç»“æœä¸€è‡´ï¼Œåé¢é‚£ä¸€ç§ç›¸å¯¹çµæ´»ä¸€ç‚¹ã€‚